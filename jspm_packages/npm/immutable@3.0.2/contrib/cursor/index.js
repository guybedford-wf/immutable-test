/* */
function cursorFrom(r,e,t){return 1===arguments.length?e=[]:"function"==typeof e?(t=e,e=[]):Array.isArray(e)||(e=[e]),makeCursor(r,e,t)}function KeyedCursor(r,e,t,o){this.size=o,this._rootData=r,this._keyPath=e,this._onChange=t}function IndexedCursor(r,e,t,o){this.size=o,this._rootData=r,this._keyPath=e,this._onChange=t}function makeCursor(r,e,t,o){arguments.length<4&&(o=r.getIn(e));var u=o&&o.size,n=Iterable.isIndexed(o)?IndexedCursor:KeyedCursor;return new n(r,e,t,u)}function wrappedValue(r,e,t){return Iterable.isIterable(t)?subCursor(r,e,t):t}function subCursor(r,e,t){return makeCursor(r._rootData,r._keyPath.concat(e),r._onChange,t)}function updateCursor(r,e,t){var o=r._rootData.updateIn(r._keyPath,t?Map():void 0,e),u=r._keyPath||[];return r._onChange&&r._onChange.call(void 0,o,r._rootData,t?u.concat(t):u),makeCursor(o,r._keyPath,r._onChange)}var Immutable=require("../../index"),Iterable=Immutable.Iterable,Iterator=Iterable.Iterator,Seq=Immutable.Seq,Map=Immutable.Map,KeyedCursorPrototype=Object.create(Seq.Keyed.prototype),IndexedCursorPrototype=Object.create(Seq.Indexed.prototype);KeyedCursorPrototype.constructor=KeyedCursor,IndexedCursorPrototype.constructor=IndexedCursor,KeyedCursorPrototype.toString=function(){return this.__toString("Cursor {","}")},IndexedCursorPrototype.toString=function(){return this.__toString("Cursor [","]")},KeyedCursorPrototype.equals=IndexedCursorPrototype.equals=function(r){return Immutable.is(this.deref(),r&&("function"==typeof r.deref?r.deref():r))},KeyedCursorPrototype.deref=IndexedCursorPrototype.deref=function(r){return this._rootData.getIn(this._keyPath,r)},KeyedCursorPrototype.get=KeyedCursorPrototype.getIn=IndexedCursorPrototype.get=IndexedCursorPrototype.getIn=function(r,e){if(Array.isArray(r)&&0===r.length)return this;var t=this._rootData.getIn(this._keyPath.concat(r),NOT_SET);return t===NOT_SET?e:wrappedValue(this,r,t)},IndexedCursorPrototype.set=KeyedCursorPrototype.set=function(r,e){return updateCursor(this,function(t){return t.set(r,e)},r)},KeyedCursorPrototype.remove=KeyedCursorPrototype["delete"]=IndexedCursorPrototype.remove=IndexedCursorPrototype["delete"]=function(r){return updateCursor(this,function(e){return e.remove(r)},r)},KeyedCursorPrototype.clear=IndexedCursorPrototype.clear=function(){return updateCursor(this,function(r){return r.clear()})},IndexedCursorPrototype.update=KeyedCursorPrototype.update=function(r,e,t){return 1===arguments.length?updateCursor(this,r):updateCursor(this,function(o){return o.update(r,e,t)},r)},KeyedCursorPrototype.withMutations=IndexedCursorPrototype.withMutations=function(r){return updateCursor(this,function(e){return(e||Map()).withMutations(r)})},KeyedCursorPrototype.cursor=IndexedCursorPrototype.cursor=function(r){return Array.isArray(r)&&0===r.length?this:subCursor(this,r)},KeyedCursorPrototype.__iterate=IndexedCursorPrototype.__iterate=function(r,e){var t=this,o=t.deref();return o&&o.__iterate?o.__iterate(function(e,o){return r(wrappedValue(t,o,e),o,t)},e):0},KeyedCursorPrototype.__iterator=IndexedCursorPrototype.__iterator=function(r,e){var t=this.deref(),o=t&&t.__iterator&&t.__iterator(Iterator.ENTRIES,e);return new Iterator(function(){if(!o)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var t=e.value,u=t[0],n=wrappedValue(this,u,t[1]);return{value:r===Iterator.KEYS?u:r===Iterator.VALUES?n:[u,n],done:!1}})},KeyedCursor.prototype=KeyedCursorPrototype,IndexedCursor.prototype=IndexedCursorPrototype;var NOT_SET={};exports.from=cursorFrom;
//# sourceMappingURL=index.js.map